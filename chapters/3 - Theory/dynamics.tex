\section{Snake robot dynamics} \label{sec:dyn}

This section, like the last section, is taken from \cite{AtussaProsjektoppgp}. The only modifications made are the variable notations and an error fix in (\ref{eq:k_rot}).

The snake robot has $n-1$ joint actuators that all can apply torques to their corresponding joints. The dynamics describe how the robot moves in response to these actuator forces. For simplicity, it is assumed that the actuators do not have dynamics of their own and, hence, arbitrary torques can be commanded at the joints of the robot \cite{murray2017mathematical}.

The dynamics of the snake robot will be expressed using the joint space equations of motion formulation

\begin{equation}
    \mathbf{M(q)\ddot{q} + C(q, \dot{q}) + g(q)} = \boldsymbol{\tau}.
\end{equation}
\\
Because the movement is restricted to the 2D plane, the gravitational term $\mathbf{g(q)}$ can be neglected and the equations of motion can be rewritten to

\begin{equation}\label{eq:eom}
    \mathbf{M(q)\ddot{q} + C(q, \dot{q})} = \boldsymbol{\tau},
\end{equation}
\\
where $\mathbf{M(q)}$ and $\mathbf{C(q,\dot{q})}$ is the mass matrix and Coriolis matrix respectively.
$\boldsymbol{\tau}$ is the vector of generalized torques corresponding to the generalized coordinates (\ref{eq:q}). Furthermore, the elements corresponding to the virtual coordinates will be zero at all times.

Solving (\ref{eq:eom}) with respect to $\mathbf{\ddot{q}}$ yields

\begin{equation}\label{eq:eom_qdd}
    \mathbf{\ddot{q}} = \mathbf{M^{-1}(q)}( \boldsymbol{\tau} - \mathbf{C(q, \dot{q})}).
\end{equation}
\\
Several methods exist for finding the equations of motion for a robot. The Euler-Lagrange method \cite{lynch2017modern}, which  is chosen here, is based on the difference in kinetic energy ($K$) and potential energy ($P$) of the system, also known as the Lagrangian

\begin{equation}
    L = K - P.
\end{equation}
\\
The equations of motion can now be expressed as a second order partial differential equation

\begin{equation} \label{eq:Lagrange}
    \frac{d}{d t} \frac{\partial L}{\partial \mathbf{\dot{q}}} - \frac{\partial L}{\partial \mathbf{q}} = \boldsymbol{\tau}.
\end{equation}
\\
Again, simplifications can be made from the restricted movement in the world and thus the potential energy $P$ can be neglected. The Lagrangian is therefore simply equal to the kinetic energy, which is the sum of the kinetic energy for every link \cite{rezapour2014path}. Furthermore, the kinetic energy for one link $i$ is divided into two parts, $K_{translational}$ and $K_{rotational}$.
The kinetic energy can now be express as

\begin{equation}\label{eq:kinen}
    K = \sum_{i=1}^{n} (K_{translational,i} + K_{rotational,i}),
\end{equation}
\\
where the translational and rotational kinetic energy is given in (\ref{eq:k_trans}) and (\ref{eq:k_rot}) respectively.

\begin{equation} \label{eq:k_trans}
    K_{translational,i} = \frac{1}{2} m (\dot{x}_i^2 + \dot{y}_i^2)
\end{equation}
\\
Here $m$ is the link mass, and $(\dot{x}_i, \dot{y}_i)$ make out the velocity of the center of the link found by differentiating (\ref{eq:pos}) with respect to time. 

\begin{equation} \label{eq:k_rot}
    K_{rotational,i} = \frac{1}{2}I\dot{\theta}_i^2
\end{equation}
\\
$\dot{\theta}_{i}$ is the rotational velocity of link $i$ with respect to the base frame. Furthermore, every link has the same moment of inertia, namely $I = (1/12)ml^2$. This is the moment of inertia of a rod, corresponding to the moment of inertia of a cylinder with zero radius \cite{lynch2017modern}.


%------------------------------------------------------------------------------------------------

%\subsection{Constrained dynamics}\label{subseq:constr_dyn}


